# ๐ SecuRisk - ะัััััะน ััะฐัั ั Docker

## ะะฐะทะฒะตัััะฒะฐะฝะธะต ะฒ 3 ะบะพะผะฐะฝะดั

### 1. ะะปะพะฝะธััะนัะต ะฟัะพะตะบั
```bash
git clone <your-repo-url> securisk
cd securisk
```

### 2. ะะฐะฟัััะธัะต ะฐะฒัะพะผะฐัะธัะตัะบะธะน ัะบัะธะฟั
```bash
./quick-start.sh
```

### 3. ะัะบัะพะนัะต ะฑัะฐัะทะตั
- **ะัะธะปะพะถะตะฝะธะต:** http://localhost
- **API ะะพะบัะผะตะฝัะฐัะธั:** http://localhost/docs

**ะฃัะตัะฝัะต ะดะฐะฝะฝัะต:**
- Username: `admin`
- Password: `admin123`

โ๏ธ **ะะะะะ:** ะกัะฐะทั ะธะทะผะตะฝะธัะต ะฟะฐัะพะปั ะฐะดะผะธะฝะธัััะฐัะพัะฐ ะฟะพัะปะต ะฟะตัะฒะพะณะพ ะฒัะพะดะฐ!

---

## ะขัะตะฑะพะฒะฐะฝะธั

- Docker 20.10+
- Docker Compose 2.0+
- 4GB RAM
- 10GB ัะฒะพะฑะพะดะฝะพะณะพ ะผะตััะฐ

### ะฃััะฐะฝะพะฒะบะฐ Docker

**Ubuntu/Debian:**
```bash
curl -fsSL https://get.docker.com | sh
sudo usermod -aG docker $USER
newgrp docker
```

**CentOS/RHEL:**
```bash
sudo yum install -y yum-utils
sudo yum-config-manager --add-repo https://download.docker.com/linux/centos/docker-ce.repo
sudo yum install -y docker-ce docker-ce-cli containerd.io
sudo systemctl start docker
sudo systemctl enable docker
```

---

## ะััะฝะพะต ัะฐะทะฒะตัััะฒะฐะฝะธะต

ะัะปะธ ัะบัะธะฟั ะฝะต ัะฐะฑะพัะฐะตั, ะฒัะฟะพะปะฝะธัะต ะบะพะผะฐะฝะดั ะฒัััะฝัั:

### ะจะฐะณ 1: ะกะพะทะดะฐะนัะต .env ัะฐะนะป
```bash
cp .env.example .env

# ะกะณะตะฝะตัะธััะนัะต SECRET_KEY
openssl rand -hex 32

# ะััะตะดะฐะบัะธััะนัะต .env ะธ ะฒััะฐะฒััะต SECRET_KEY
nano .env
```

### ะจะฐะณ 2: ะกะฑะพัะบะฐ ะธ ะทะฐะฟััะบ
```bash
# ะกะฑะพัะบะฐ ะพะฑัะฐะทะพะฒ
docker-compose build

# ะะฐะฟััะบ ะบะพะฝัะตะนะฝะตัะพะฒ
docker-compose up -d

# ะัะพะฒะตัะบะฐ ััะฐัััะฐ
docker-compose ps

# ะัะพัะผะพัั ะปะพะณะพะฒ
docker-compose logs -f
```

### ะจะฐะณ 3: ะัะพะฒะตัะบะฐ ัะฐะฑะพัั
```bash
# ะัะพะฒะตัะบะฐ frontend
curl http://localhost

# ะัะพะฒะตัะบะฐ backend
curl http://localhost/docs
```

---

## ะฃะฟัะฐะฒะปะตะฝะธะต

### ะัะฝะพะฒะฝัะต ะบะพะผะฐะฝะดั
```bash
# ะัะพัะผะพัั ััะฐัััะฐ
docker-compose ps

# ะัะพัะผะพัั ะปะพะณะพะฒ
docker-compose logs -f

# ะััะฐะฝะพะฒะบะฐ
docker-compose stop

# ะะฐะฟััะบ
docker-compose start

# ะะตัะตะทะฐะฟััะบ
docker-compose restart

# ะััะฐะฝะพะฒะบะฐ ะธ ัะดะฐะปะตะฝะธะต (ะดะฐะฝะฝัะต ัะพััะฐะฝััััั)
docker-compose down

# ะััะฐะฝะพะฒะบะฐ ะธ ัะดะฐะปะตะฝะธะต ะฒัะตั ะดะฐะฝะฝัั (ะะกะขะะะะะะ!)
docker-compose down -v
```

### ะะพะณะธ ะบะพะฝะบัะตัะฝะพะณะพ ัะตัะฒะธัะฐ
```bash
docker-compose logs backend
docker-compose logs frontend
docker-compose logs mongodb
docker-compose logs nginx
```

---

## ะะตะทะตัะฒะฝะพะต ะบะพะฟะธัะพะฒะฐะฝะธะต

### Backup ะฑะฐะทั ะดะฐะฝะฝัั
```bash
# ะกะพะทะดะฐะฝะธะต backup
docker exec securisk-mongodb mongodump --db securisk_db --archive=/tmp/backup.archive

# ะะพะฟะธัะพะฒะฐะฝะธะต ะฝะฐ ัะพัั
docker cp securisk-mongodb:/tmp/backup.archive ./backup_$(date +%Y%m%d).archive
```

### Restore ะฑะฐะทั ะดะฐะฝะฝัั
```bash
# ะะพะฟะธัะพะฒะฐะฝะธะต ะฒ ะบะพะฝัะตะนะฝะตั
docker cp ./backup.archive securisk-mongodb:/tmp/

# ะะพัััะฐะฝะพะฒะปะตะฝะธะต
docker exec securisk-mongodb mongorestore --db securisk_db --archive=/tmp/backup.archive
```

---

## ะะตัะตะฝะธะต ะฟัะพะฑะปะตะผ

### ะะพะฝัะตะนะฝะตัั ะฝะต ะทะฐะฟััะบะฐัััั
```bash
# ะัะพะฒะตัััะต ะปะพะณะธ
docker-compose logs

# ะัะพะฒะตัััะต, ะฝะต ะทะฐะฝััั ะปะธ ะฟะพััั
sudo netstat -tulpn | grep -E ':80|:443|:3000|:8001|:27017'

# ะััะฐะฝะพะฒะธัะต ะบะพะฝัะปะธะบััััะธะต ัะตัะฒะธัั
sudo systemctl stop nginx
sudo systemctl stop apache2

# ะะตัะตะทะฐะฟัััะธัะต Docker
sudo systemctl restart docker
docker-compose up -d
```

### ะัะธะฑะบะฐ 502 Bad Gateway
```bash
# ะัะพะฒะตัััะต ััะฐััั ะฒัะตั ะบะพะฝัะตะนะฝะตัะพะฒ
docker-compose ps

# ะัะพะฒะตัััะต ะปะพะณะธ
docker-compose logs backend
docker-compose logs frontend
docker-compose logs nginx

# ะะตัะตะทะฐะฟัััะธัะต ะฒัะต ัะตัะฒะธัั
docker-compose restart
```

### Backend ะฝะต ะฟะพะดะบะปััะฐะตััั ะบ MongoDB
```bash
# ะัะพะฒะตัััะต ััะฐััั MongoDB
docker-compose ps mongodb

# ะัะพะฒะตัััะต ะปะพะณะธ MongoDB
docker-compose logs mongodb

# ะะตัะตะทะฐะฟัััะธัะต MongoDB ะธ backend
docker-compose restart mongodb backend
```

### ะะตัะฒะฐัะบะฐ ะผะตััะฐ ะฝะฐ ะดะธัะบะต
```bash
# ะัะพะฒะตัััะต ะธัะฟะพะปัะทะพะฒะฐะฝะธะต
docker system df

# ะัะธััะบะฐ ะฝะตะธัะฟะพะปัะทัะตะผัั ะดะฐะฝะฝัั
docker system prune -a

# ะััะพัะพะถะฝะพ: ัะดะฐะปะตะฝะธะต volumes (ัะดะฐะปะธั ะดะฐะฝะฝัะต!)
docker volume prune
```

---

## ะะฑะฝะพะฒะปะตะฝะธะต

```bash
# 1. ะััะฐะฝะพะฒะบะฐ ะบะพะฝัะตะนะฝะตัะพะฒ
docker-compose down

# 2. Backup ะฑะฐะทั ะดะฐะฝะฝัั (ะฒะฐะถะฝะพ!)
docker exec securisk-mongodb mongodump --db securisk_db --archive=/tmp/backup.archive
docker cp securisk-mongodb:/tmp/backup.archive ./backup_before_update.archive

# 3. ะะฑะฝะพะฒะปะตะฝะธะต ะบะพะดะฐ
git pull origin main

# 4. ะะตัะตัะฑะพัะบะฐ ะพะฑัะฐะทะพะฒ
docker-compose build --no-cache

# 5. ะะฐะฟััะบ ะพะฑะฝะพะฒะปะตะฝะฝะพะน ะฒะตััะธะธ
docker-compose up -d

# 6. ะัะพะฒะตัะบะฐ ะปะพะณะพะฒ
docker-compose logs -f
```

---

## Production ะฝะฐัััะพะนะบะฐ

### 1. ะะทะผะตะฝะธัะต .env ัะฐะนะป
```bash
SECRET_KEY=<ัะธะปัะฝัะน_ัะปััะฐะนะฝัะน_ะบะปัั_32_ัะธะผะฒะพะปะฐ>
ENVIRONMENT=production
DEBUG=false
```

### 2. ะะฐัััะพะนัะต HTTPS (ัะตะบะพะผะตะฝะดัะตััั)
ะกะผ. ะฟะพะดัะพะฑะฝัั ะธะฝััััะบัะธั ะฒ `DOCKER_DEPLOY.md`

### 3. ะะฐัััะพะนัะต ะฐะฒัะพะทะฐะฟััะบ
```bash
# Docker ะฐะฒัะพะผะฐัะธัะตัะบะธ ะทะฐะฟััะบะฐะตััั ะฟัะธ ะทะฐะณััะทะบะต
sudo systemctl enable docker

# ะะพะฝัะตะนะฝะตัั ะฐะฒัะพะผะฐัะธัะตัะบะธ ะทะฐะฟััะบะฐัััั (ัะถะต ะฝะฐัััะพะตะฝะพ ัะตัะตะท restart: always)
```

### 4. ะะฐัััะพะนัะต ะฐะฒัะพะผะฐัะธัะตัะบะธะน backup
```bash
# ะกะพะทะดะฐะนัะต ัะบัะธะฟั /opt/backup-securisk.sh
sudo nano /opt/backup-securisk.sh

# ะะพะฑะฐะฒััะต ะฒ crontab (ะตะถะตะดะฝะตะฒะฝะพ ะฒ 2:00)
crontab -e
0 2 * * * /opt/backup-securisk.sh >> /var/log/securisk-backup.log 2>&1
```

---

## ะััะธัะตะบัััะฐ

```
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ                       ะะพะปัะทะพะฒะฐัะตะปั                           โ
โโโโโโโโโโโโโโโโโโโโโโโโโโฌโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
                         โ
                         โผ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ              Nginx Container (Port 80/443)                   โ
โโโโโโโโโโโโโโโโฌโโโโโโโโโโโโโโโโโโโโโโโฌโโโโโโโโโโโโโโโโโโโโโโโโ
               โ                      โ
               โ                      โ
        โโโโโโโโผโโโโโโโโ      โโโโโโโโผโโโโโโโโ
        โ   Frontend   โ      โ   Backend    โ
        โ  Container   โ      โ  Container   โ
        โ  (Port 3000) โ      โ  (Port 8001) โ
        โโโโโโโโโโโโโโโโ      โโโโโโโโฌโโโโโโโโ
                                     โ
                                     โผ
                              โโโโโโโโโโโโโโโ
                              โ   MongoDB   โ
                              โ  Container  โ
                              โ (Port 27017)โ
                              โโโโโโโโโโโโโโโ
```

---

## ะงัะพ ะฒะบะปััะตะฝะพ

โ **Backend (FastAPI)** - REST API ัะตัะฒะตั  
โ **Frontend (React)** - ะะตะฑ-ะธะฝัะตััะตะนั  
โ **MongoDB** - ะะฐะทะฐ ะดะฐะฝะฝัั  
โ **Nginx** - Reverse proxy  
โ ะะฒัะพะผะฐัะธัะตัะบะฐั ะฝะฐัััะพะนะบะฐ ัะตัะธ  
โ Healthcheck ะดะปั ะฒัะตั ัะตัะฒะธัะพะฒ  
โ Persistent volumes ะดะปั ะดะฐะฝะฝัั  
โ ะะพะณะธัะพะฒะฐะฝะธะต  
โ ะะฒัะพะฟะตัะตะทะฐะฟััะบ ะฟัะธ ัะฑะพัั  

---

## ะะพััั

- **80** - HTTP (Nginx)
- **443** - HTTPS (Nginx, ะตัะปะธ ะฝะฐัััะพะตะฝ SSL)
- **3000** - Frontend (ะฒะฝัััะตะฝะฝะธะน)
- **8001** - Backend API (ะฒะฝัััะตะฝะฝะธะน)
- **27017** - MongoDB (ะฒะฝัััะตะฝะฝะธะน)

โ๏ธ ะะฝะตัะฝะต ะดะพัััะฟะตะฝ ัะพะปัะบะพ ะฟะพัั 80 (ะธ 443 ะดะปั HTTPS). ะััะฐะปัะฝัะต ะฟะพััั ะดะพัััะฟะฝั ัะพะปัะบะพ ะฒะฝัััะธ Docker ัะตัะธ.

---

## ะะพะฟะพะปะฝะธัะตะปัะฝะฐั ะดะพะบัะผะตะฝัะฐัะธั

- **README.md** - ะะพะปะฝะฐั ะดะพะบัะผะตะฝัะฐัะธั ัะธััะตะผั
- **DOCKER_DEPLOY.md** - ะะพะดัะพะฑะฝัะต ะธะฝััััะบัะธะธ ะฟะพ Docker
- **API Docs** - http://localhost/docs (ะฟะพัะปะต ะทะฐะฟััะบะฐ)

---

## ะะพะดะดะตัะถะบะฐ

ะัะธ ะฒะพะทะฝะธะบะฝะพะฒะตะฝะธะธ ะฟัะพะฑะปะตะผ:

1. ะัะพะฒะตัััะต ะปะพะณะธ: `docker-compose logs`
2. ะัะพะฒะตัััะต ััะฐััั: `docker-compose ps`
3. ะัะพัะธัะฐะนัะต ัะฐะทะดะตะป "ะะตัะตะฝะธะต ะฟัะพะฑะปะตะผ" ะฒััะต
4. ะกะผ. ะฟะพะดัะพะฑะฝัั ะดะพะบัะผะตะฝัะฐัะธั ะฒ `DOCKER_DEPLOY.md`

---

**SecuRisk** - ะะฐัะฐ ะฑะตะทะพะฟะฐัะฝะพััั ะฟะพะด ะบะพะฝััะพะปะตะผ! ๐๐ณ
